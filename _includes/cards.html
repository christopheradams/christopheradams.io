<div class="card-columns">
  {% for post in include.posts %}
  {%- assign post_summary = post.description | default: post.excerpt | strip_html | normalize_whitespace | truncatewords: 50 -%}
  {%- comment -%} For accessibility: use title if available, otherwise use truncated summary {%- endcomment -%}
  {%- if post.title and post.title != "" -%}
    {%- assign post_accessible_name = post.title | escape -%}
    {%- assign post_image_alt = post.title | escape -%}
  {%- else -%}
    {%- assign post_accessible_name = post_summary | truncatewords: 10 -%}
    {%- assign post_image_alt = post_summary | truncatewords: 10 -%}
  {%- endif -%}
  <div class="card-block">
  <div class="card">
    {% assign post_image = post.image.path | default: post.image %}
    {% if post_image %}
    {%- unless post_image contains "://" -%}
    {% picture card {{ post_image }} --alt {{ post_image_alt }} --img class="card-img-top" %}
    {% else %}
    <img class="card-img-top" alt="{{ post_image_alt }}" src="{{ post_image }}">
    {% endunless %}
    {% endif %}
    <div class="card-body">
      <span class="card-title">
        <a href="{{ post.url | prepend: site.baseurl }}" class="card-link card-link-stretched" itemprop="url" aria-label="{{ post_accessible_name }}">
          <span class="visually-hidden">{{ post_accessible_name }}</span>
        </a>
        {% if post.title and post.title != "" %}
        <strong itemprop="name">{{ post.title | escape }}</strong>
        {% if post_summary != "" %}
        <span class="card-title-separator">&mdash;</span>
        {% endif %}
        {% else %}
        {% unless post_image %}
        <strong aria-hidden="true">Â¶</strong>
        {% endunless %}
        {% endif %}
        <span class="card-description" itemprop="description">
          {{ post_summary }}
        </span>
      </span>
    </div>
  </div>
  </div>
  {% endfor %}
</div>
